# variable file for deploying and configuring Windows VM from template for customer PostAG
# my defaults to avoind entering everytime to be deleted once everything is working.

# vCenter Details where the VM will get deployed
vCenter:
  server: "atvies992qwsrv.admingate.local"
  dataCenter: "DCN-DCS"
  cluster: "shared-openshift-farm"
  datastore: "Shared-Openshift-DCS-PMAX-1633-01-Gold"
  vmFolder: "/vm/shared-openshift-farm/Abhi_VMDeploy_Test"
  templateName: "WIN2019std_gpp_6.0_tpl"
  #templateName: "W2k19-template-clone"
  # resourcePool: ""

emailDetail:
  physicalDatacenter: 'DCN'
  storageClass: 'Gold'
  
# VM Details Hardware, IP address
vm:
  Name: "w2k19-test005"
  Memory: "4096" # in MB
  Cpu: "4"
  Num_Cpu_Cores_Per_Socket: "2"  

vm_networks:
- name: "PG-Ansible-NoNIC"
#- name: "dPG-Openshift-AGT-Atos-Frontend-3000"
  ip: "10.20.30.110"
  netmask: "255.255.255.0"
  gateway: "10.20.30.1"
  start_connected: yes
  type: static
  connected: yes
  dns_servers:
  - 10.20.30.100
- name: "PG-Ansible-NoNIC-1"
  ip: "193.186.254.102"
  netmask: "255.255.255.128"
  connected: yes
  start_connected: yes
  type: static

# Domain details to add VM and correct OU and Group to be added in Local administrators group
domain:
  name: "ansible.cb"
  # following options pick any one of them
  #   PostAG.intern
  #   post.sapdom.at
  ouPath: "OU=Servers,OU=Lab,DC=ansible,DC=cb"
  # following options pick any one of them based on the requirement
  #   PostAG.intern/Siemens/Server/Vollbetrieb/ApplVM/Test+Entw/  
  #   PostAG.intern/Siemens/Server/Vollbetrieb/ApplVM/Prod/
  #   post.sapdom.at/SAP/Test Server/     
  #   post.sapdom.at/SAP/Productive Server
  adminGroup: 'ansible\lab_admin'      # in the format domain\group name
  # Post_Admins_AB 
  addDomainUser: 'ansible\addToDomain'
  addDomainUserPassword: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          63396661623966366330313032373135643734346330653231313563333665313934396664346136
          3439303566613136313461613237316337373239633965630a653735366636373132646639616561
          66386634646664323832306336666436343038306336653533396265323366623531383164376362
          3131303338666432350a663333646131656265383539303066356262353765396231343263393132
          6561

# Windows Template local user and encrypted password
local:
  userName: "eoc_ro"
  userPassword: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          63396661623966366330313032373135643734346330653231313563333665313934396664346136
          3439303566613136313461613237316337373239633965630a653735366636373132646639616561
          66386634646664323832306336666436343038306336653533396265323366623531383164376362
          3131303338666432350a663333646131656265383539303066356262353765396231343263393132
          6561

# If the VM has more than one disk add the details in following format.
# increment unit_number start with 1 and avoid number 7 ("Invalid scsi disk unitNumber, valid 0-15(except 7).)
vm_disks:
  - { datastore: "Shared-Openshift-DCS-PMAX-1633-01-Gold", type: thin, size_gb: "5", unit_number: "1", controller_type: "paravirtual", controller_number: "0"}
  - { datastore: "Shared-Openshift-DCS-PMAX-1633-01-Gold", type: thin, size_gb: "6", unit_number: "2", controller_type: "paravirtual", controller_number: "0"}
  - { datastore: "Shared-Openshift-DCS-PMAX-1633-01-Gold", type: thin, size_gb: "7", unit_number: "3", controller_type: "paravirtual", controller_number: "0"}
  #- { datastore: "Shared-Openshift-DCS-PMAX-1633-01-Gold", type: thin, size_gb: "5", unit_number: "4", controller_type: "paravirtual", controller_number: "0"}

# This needs to be inline with the disks added in VM Deploy phase. Make sure the Disk sequence, number of disks are correct.

vm_disks_format:
  - { disk_number: '1', drive_letter: 'D', allocation_unit_size: '65536', file_system: 'NTFS', new_label: 'App', force: 'yes' }
  - { disk_number: '2', drive_letter: 'E', allocation_unit_size: '65536', file_system: 'NTFS', new_label: 'logs', force: 'yes' }
  - { disk_number: '3', drive_letter: 'F', allocation_unit_size: '65536', file_system: 'NTFS', new_label: 'backup', force: 'yes' }

# Routes to add if more than 2 add then in following format if only one remove the 2nd line.

routes:
  - { route: '158.226.253.160', mask: '255.255.255.224', dg: '10.199.67.254' }
  - { route: '158.226.130.64', mask: '255.255.255.192', dg: '10.199.67.254' }

# Rune the  Just Enough Administration script provided by Customer PotAG
JEAUserDiscovery:
  folder: 'jea_disco'
  pshome: 'C:\Windows\System32\WindowsPowerShell\v1.0\Modules\'
  registerFile: jea_disco.pssc

# add registry entries in deployed VM, all .reg files are kept under c:\temp\registryEntriesToAdd folder and the lines are added here.
registryEntriesToAdd:
  - { name: 'sslv3Deactivate.reg' }
  - { name: 'tLSActiveOnly1.2.reg' }
  
# Agents configuration this will be mostly static, if any changes were done in Template those must be reflected here.
agents:
  nessus:
    installer:
      folder: "Tenable 10.1.3" 
      file: "NessusAgent-10.1.3-x64.msi"
    server: "sensorproxy.postag.intern"
    groups: ""
    key: "00abcd00000efgh11111i0k222lmopq3333st4455u66v777777w88xy9999zabc00"
  zabbix:
    installer: 
      folder: "Zabbix"
      file: "zabbix_agent-4.0.13-windows-amd64-openssl.msi"
    hostnamefqdn: "1"
    server: "zabbixproxy01-atos.postag.intern,zabbixproxy02-atos.postag.intern,zabbix.postag.intern,zabbixserver01.postag.intern,zabbixserver02.postag.intern,vip-zabbixserver.postag.intern,zabbixproxy0l-azure.postag.intern,zabbixproxy02-azure.postag.intern"
    lport: "10050"
    rmtcmd: "1"
  splunk:
    installer: 
      folder: "PostAG_SplunkForwarder_8.2.5_Windows_x64_20220519"
      script: "Install-SplunkUF.ps1"
  snow:
    installer: 
      folder: "SNOW PostAG"
      script: "InstallSnowAgent.bat"
  umf:
    installer: 
      folder: 'NAGIOS KIT\NAGIOS'
      script: "'install NEW.bat'"
  bbsa: # no space in the folder or file name, update template accordingly.
    installer: 
      folder: 'BBSA_210201'
      file: "RSCD210201-WIN64.msi"
      userslocal: "users.local"
      exports: "exports"
    smartAgent: "0"
  networker:
    configureFirewall: "0" # to configure set 0 to not to configure set to 1
    startServices: "1" # to start service set 1 to not to start service set to 0
    pathToProgram: 'C:\Program Files\EMC NetWorker\nsr\res\'
    installer:
      folder: "nw19.5.0.5_win_x64"
      files:
        client: 'lgtoxtdclnt-19.5.0.5.exe'
        networker: 'NetWorker-19.5.0.5.exe'
        servers: 'servers'
    nsrpath:
      folder: 'PostAG NSR'
      sql: 'NSR SQL'
      nosql: 'NSR dir D'
      filename: 'nsr.dir'
  
foldersToDelete: # list of files and folders to delete from c:\Temp folder
  - { name: 'ATF-SCOM-2_AgentPackage_v2.7' }
  - { name: 'BBSA_210201' }
  - { name: "'NAGIOS KIT'" }
  - { name: 'NagiosASECleanup' }
  - { name: 'nw19.5.0.5_win_x64' }
  - { name: "'PostAG NSR'" }
  - { name: 'PostAG_SplunkForwarder_8.2.5_Windows_x64_20220519' }
  - { name: 'SBSMaint2.1' }
  - { name: "'SNOW PostAG'" }
  - { name: "'Tenable 10.1.3'" }
  - { name: 'Zabbix' }
  - { name: 'registryEntriesToAdd' }
  - { name: 'jea_disco' }
  
  # SMTP server details and emails ID to receive notification of VM Deployment
smtp:
  server: 192.138.228.163
  port: 25
  toEmailIdsVmwareTeam: # add the email ids who should receive emails once a VM is deployed from template
  - Abhijeet Janwalkar <abhijeet.2.janwalkar@atos.net>
  #- Markus Weber <markus.a.weber@atos.net>
  toEmailIdsWindowsTeam: # add the email ids who should receive emails once a VM is configured.
  - Abhijeet Janwalkar <abhijeet.2.janwalkar@atos.net>
  #- Markus Weber <markus.a.weber@atos.net>
  fromEmailId: noreply@ansible.net