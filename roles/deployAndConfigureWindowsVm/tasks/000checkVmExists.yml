---
- name: Gather info for '{{ vm.Name }}'
  community.vmware.vmware_guest_info:
    hostname: "{{ vCenter.server }}"
    username: "{{ vCenter_user }}"
    password: "{{ vCenter_user_pass }}"
    datacenter: '{{ vCenter.dataCenter }}'
    schema: "vsphere"
    name: '{{ vm.Name }}'
    validate_certs: false
    properties:
      - _moId
  delegate_to: localhost
  register: vm_moId
  ignore_errors: yes

- block:
    - name: end play When VM exists
      debug:
        msg: 'The VM {{ vm.Name }}  already exists so ending the execution'
        
    - meta: end_play
  when: vm_moId.failed == false
  
- debug:
    msg: 'The VM {{ vm.Name }}  does not exist hence playbook will continue'